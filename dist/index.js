/*! css-search-v2 - 1.0.1 */
!function(t,e){'object'==typeof exports&&'object'==typeof module?module.exports=e():'function'==typeof define&&define.amd?define([],e):'object'==typeof exports?exports["css-search-v2"]=e():t["css-search-v2"]=e()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'__esModule',{value:!0})}},e={};function n(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}t.r(e),t.d(e,{default:()=>G});const s=globalThis,i=s.trustedTypes,o=i?i.createPolicy("lit-html",{createHTML:t=>t}):void 0,r="$lit$",l=`lit$${(Math.random()+"").slice(9)}$`,a="?"+l,c=`<${a}>`,h=document,d=()=>h.createComment(""),u=t=>null===t||"object"!=typeof t&&"function"!=typeof t,p=Array.isArray,$=t=>p(t)||"function"==typeof t?.[Symbol.iterator],g="[ \t\n\f\r]",_=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,A=/-->/g,f=/>/g,m=RegExp(`>|${g}(?:([^\\s"'>=/]+)(${g}*=${g}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),v=/'/g,y=/"/g,b=/^(?:script|style|textarea|title)$/i,x=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),S=x(1),H=(x(2),Symbol.for("lit-noChange")),C=Symbol.for("lit-nothing"),T=new WeakMap,w=h.createTreeWalker(h,129);function N(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==o?o.createHTML(e):e}const P=(t,e)=>{const n=t.length-1,s=[];let i,o=2===e?"<svg>":"",a=_;for(let e=0;e<n;e++){const n=t[e];let h,d,u=-1,p=0;for(;p<n.length&&(a.lastIndex=p,d=a.exec(n),null!==d);)p=a.lastIndex,a===_?"!--"===d[1]?a=A:void 0!==d[1]?a=f:void 0!==d[2]?(b.test(d[2])&&(i=RegExp("</"+d[2],"g")),a=m):void 0!==d[3]&&(a=m):a===m?">"===d[0]?(a=i??_,u=-1):void 0===d[1]?u=-2:(u=a.lastIndex-d[2].length,h=d[1],a=void 0===d[3]?m:'"'===d[3]?y:v):a===y||a===v?a=m:a===A||a===f?a=_:(a=m,i=void 0);const $=a===m&&t[e+1].startsWith("/>")?" ":"";o+=a===_?n+c:u>=0?(s.push(h),n.slice(0,u)+r+n.slice(u)+l+$):n+l+(-2===u?e:$)}return[N(t,o+(t[n]||"<?>")+(2===e?"</svg>":"")),s]};class M{constructor({strings:t,_$litType$:e},n){let s;this.parts=[];let o=0,c=0;const h=t.length-1,u=this.parts,[p,$]=P(t,e);if(this.el=M.createElement(p,n),w.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(s=w.nextNode())&&u.length<h;){if(1===s.nodeType){if(s.hasAttributes())for(const t of s.getAttributeNames())if(t.endsWith(r)){const e=$[c++],n=s.getAttribute(t).split(l),i=/([.?@])?(.*)/.exec(e);u.push({type:1,index:o,name:i[2],strings:n,ctor:"."===i[1]?I:"?"===i[1]?B:"@"===i[1]?U:O}),s.removeAttribute(t)}else t.startsWith(l)&&(u.push({type:6,index:o}),s.removeAttribute(t));if(b.test(s.tagName)){const t=s.textContent.split(l),e=t.length-1;if(e>0){s.textContent=i?i.emptyScript:"";for(let n=0;n<e;n++)s.append(t[n],d()),w.nextNode(),u.push({type:2,index:++o});s.append(t[e],d())}}}else if(8===s.nodeType)if(s.data===a)u.push({type:2,index:o});else{let t=-1;for(;-1!==(t=s.data.indexOf(l,t+1));)u.push({type:7,index:o}),t+=l.length-1}o++}}static createElement(t,e){const n=h.createElement("template");return n.innerHTML=t,n}}function E(t,e,n=t,s){if(e===H)return e;let i=void 0!==s?n._$Co?.[s]:n._$Cl;const o=u(e)?void 0:e._$litDirective$;return i?.constructor!==o&&(i?._$AO?.(!1),void 0===o?i=void 0:(i=new o(t),i._$AT(t,n,s)),void 0!==s?(n._$Co??=[])[s]=i:n._$Cl=i),void 0!==i&&(e=E(t,i._$AS(t,e.values),i,s)),e}class j{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,s=(t?.creationScope??h).importNode(e,!0);w.currentNode=s;let i=w.nextNode(),o=0,r=0,l=n[0];for(;void 0!==l;){if(o===l.index){let e;2===l.type?e=new L(i,i.nextSibling,this,t):1===l.type?e=new l.ctor(i,l.name,l.strings,this,t):6===l.type&&(e=new k(i,this,t)),this._$AV.push(e),l=n[++r]}o!==l?.index&&(i=w.nextNode(),o++)}return w.currentNode=h,s}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class L{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,s){this.type=2,this._$AH=C,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=E(this,t,e),u(t)?t===C||null==t||""===t?(this._$AH!==C&&this._$AR(),this._$AH=C):t!==this._$AH&&t!==H&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):$(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==C&&u(this._$AH)?this._$AA.nextSibling.data=t:this.T(h.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:n}=t,s="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=M.createElement(N(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===s)this._$AH.p(e);else{const t=new j(s,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t}}_$AC(t){let e=T.get(t.strings);return void 0===e&&T.set(t.strings,e=new M(t)),e}k(t){p(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,s=0;for(const i of t)s===e.length?e.push(n=new L(this.S(d()),this.S(d()),this,this.options)):n=e[s],n._$AI(i),s++;s<e.length&&(this._$AR(n&&n._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class O{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,s,i){this.type=1,this._$AH=C,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=C}_$AI(t,e=this,n,s){const i=this.strings;let o=!1;if(void 0===i)t=E(this,t,e,0),o=!u(t)||t!==this._$AH&&t!==H,o&&(this._$AH=t);else{const s=t;let r,l;for(t=i[0],r=0;r<i.length-1;r++)l=E(this,s[n+r],e,r),l===H&&(l=this._$AH[r]),o||=!u(l)||l!==this._$AH[r],l===C?t=C:t!==C&&(t+=(l??"")+i[r+1]),this._$AH[r]=l}o&&!s&&this.j(t)}j(t){t===C?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class I extends O{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===C?void 0:t}}class B extends O{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==C)}}class U extends O{constructor(t,e,n,s,i){super(t,e,n,s,i),this.type=5}_$AI(t,e=this){if((t=E(this,t,e,0)??C)===H)return;const n=this._$AH,s=t===C&&n!==C||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,i=t!==C&&(n===C||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class k{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){E(this,t)}}const z=s.litHtmlPolyfillSupport;z?.(M,L),(s.litHtmlVersions??=[]).push("3.1.2");const R=1;class W{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const D="important",V=" !"+D,Z=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends W{constructor(t){if(super(t),t.type!==R||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,n)=>{const s=t[n];return null==s?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`}),"")}update(t,[e]){const{style:n}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(const t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?n.removeProperty(t):n[t]=null);for(const t in e){const s=e[t];if(null!=s){this.ft.add(t);const e="string"==typeof s&&s.endsWith(V);t.includes("-")||e?n.setProperty(t,e?s.slice(0,-11):s,e?D:""):n[t]=s}}return H}});var q,J,F;const G=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t.SelectorManager,i=document.createElement('div'),o=t.Config.selectorManager.pStylePrefix,r={enablePerformance:!1,enableCount:!0,containerStyle:"\n      .".concat(o,"suggest {\n        position: absolute;\n        z-index: 999;\n        padding: 0;\n        margin: 0;\n        left: 0;\n        right: 0;\n        transition: opacity .25s ease;\n        text-align: left;\n        padding: 0 5px;\n      }\n    "),tagStyle:"\n      div.".concat(o,"suggest__class {\n        list-style: none;\n        cursor: pointer;\n        display: inline-block;\n      }\n      .").concat(o,"suggest__count {\n        vertical-align: baseline;\n        font-size: x-small;\n      }\n    "),...e};async function l(e){var l;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'';r.enablePerformance&&console.time('update'),r.enablePerformance&&console.time('all-comps');const c=localStorage.getItem('gjsProject'),h=c?JSON.parse(c):{styles:[]},u=Promise.all(h.styles.flatMap((t=>t.selectors.map((t=>t)))).filter((t=>'string'==typeof t))),p=[];r.enableCount&&t.Pages.getAll().forEach((t=>{t.getMainComponent().onAll((t=>p.push(t)))})),r.enablePerformance&&console.timeEnd('all-comps');const $='gjs-cv-unscale',g='sp-choose';let _=!1;const A=Promise.all(s.getAll().filter((t=>t.getLabel()===$?(_=!0,!1):_&&t.getLabel()===g?(_=!1,!1):!_&&!t.private&&!s.getSelected().includes(t)&&(t.getLabel().toLowerCase().includes(a.toLowerCase())||''===a)))),[f,m]=await Promise.all([u,A]);console.log(f),console.log(m);let v={};p.forEach((t=>{t&&'function'==typeof t.getClasses&&t.getClasses().forEach((t=>{v[t]=(v[t]||0)+1}))}));const y=r.enableCount?m.map((t=>({sel:t,count:v[t.id]||0}))).sort(((t,e)=>e.count-t.count)).filter((t=>{let{sel:e,count:n}=t;return n>-1})):m.map((t=>({sel:t,count:0})));console.log(m),((t,e,n)=>{const s=n?.renderBefore??e;let i=s._$litPart$;if(void 0===i){const t=n?.renderBefore??null;s._$litPart$=i=new L(e.insertBefore(d(),t),t,void 0,n??{})}i._$AI(t)})(S(q||(q=n(["\n        <div\n          class=\"","suggest ","one-bg\"\n          style=","\n        >\n          ","\n        </div>\n      "])),o,o,Z({opacity:e?'1':'0','pointer-events':e?'initial':'none'}),y.map((t=>{let{sel:e,count:i}=t;return S(J||(J=n(["\n                <div\n                  data-sel-id=","\n                  class=\"","clm-tag ","three-bg ","suggest__class\"\n                  @mousedown=","\n                >\n                  <span data-tag-name=\"\">","</span>\n                  ","\n                </div>\n              "])),e.id,o,o,o,(()=>function(t){var e,n;null!==(e=r.enablePerformance)&&void 0!==e||console.time('select');const i=s.getAll().find((e=>e.id===t));s.addSelected(i),null!==(n=r.enablePerformance)&&void 0!==n||console.timeEnd('select')}(e.id)),e.getLabel(),r.enableCount?S(F||(F=n(["<span\n                        class=\"","clm-tag-status ","suggest__count\"\n                        data-tag-status=\"\"\n                        >","</span\n                      >"])),o,o,i):'')}))),i),null!==(l=r.enablePerformance)&&void 0!==l||console.timeEnd('update')}t.on('load',(()=>{const e=t.getContainer().querySelector("#".concat(o,"clm-tags-field")),n=e.querySelector("#".concat(o,"clm-new"));e.parentNode.insertBefore(i,e.nextSibling);const s=document.createElement('style');function a(t,e){let n;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),t(...i)}),e)}}s.innerHTML=r.containerStyle+r.tagStyle,document.head.appendChild(s),n.addEventListener('keyup',a((()=>l(!0,n.value)),750)),n.addEventListener('blur',a((()=>l(!1)),750)),n.addEventListener('focus',a((()=>l(!0,n.value)),750))}))};return e})()));
//# sourceMappingURL=index.js.map